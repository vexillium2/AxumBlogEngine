# Axum Blog Engine

ä¸€ä¸ªåŸºäº Rust Axum æ¡†æ¶æ„å»ºçš„ç°ä»£åŒ–è½»é‡çº§åšå®¢å¼•æ“ï¼Œæä¾›å®Œæ•´çš„åšå®¢åŠŸèƒ½å’Œ RESTful APIã€‚

[English](README_EN.md) | **ä¸­æ–‡**

## âœ¨ ç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½**: åŸºäº Rust å’Œ Axum æ¡†æ¶ï¼Œæä¾›å“è¶Šçš„æ€§èƒ½å’Œå¹¶å‘å¤„ç†èƒ½åŠ›
- ğŸ” **å®‰å…¨è®¤è¯**: JWT ä»¤ç‰Œè®¤è¯ï¼Œbcrypt å¯†ç åŠ å¯†
- ğŸ“ **å®Œæ•´åšå®¢åŠŸèƒ½**: æ–‡ç« åˆ›å»ºã€ç¼–è¾‘ã€åˆ†ç±»ã€æœç´¢
- ğŸ’¬ **è¯„è®ºç³»ç»Ÿ**: æ”¯æŒåµŒå¥—è¯„è®ºå’Œå›å¤
- â­ **æ”¶è—åŠŸèƒ½**: ç”¨æˆ·å¯ä»¥æ”¶è—å–œæ¬¢çš„æ–‡ç« 
- ğŸ‘¥ **ç”¨æˆ·ç®¡ç†**: ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æƒé™ç®¡ç†
- ğŸ—„ï¸ **è½»é‡æ•°æ®åº“**: ä½¿ç”¨ SQLiteï¼Œæ˜“äºéƒ¨ç½²å’Œç»´æŠ¤
- ğŸ“Š **åˆ†é¡µæŸ¥è¯¢**: æ‰€æœ‰åˆ—è¡¨æ¥å£æ”¯æŒåˆ†é¡µ
- ğŸ§ª **å®Œæ•´æµ‹è¯•**: 60+ æµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½
- ğŸ“– **RESTful API**: éµå¾ª REST è®¾è®¡åŸåˆ™çš„ API æ¥å£

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯æ¡†æ¶**: [Axum](https://github.com/tokio-rs/axum) - ç°ä»£åŒ–çš„ Rust Web æ¡†æ¶
- **æ•°æ®åº“**: SQLite - è½»é‡çº§åµŒå…¥å¼æ•°æ®åº“
- **ORM**: [SeaORM](https://www.sea-ql.org/SeaORM/) - Rust å¼‚æ­¥ ORM
- **è®¤è¯**: JWT (JSON Web Tokens) + bcrypt å¯†ç å“ˆå¸Œ
- **åºåˆ—åŒ–**: Serde - JSON åºåˆ—åŒ–/ååºåˆ—åŒ–
- **æ—¥å¿—**: Tracing - ç»“æ„åŒ–æ—¥å¿—è®°å½•
- **éªŒè¯**: Validator - è¯·æ±‚æ•°æ®éªŒè¯
- **æµ‹è¯•**: Tokio Test - å¼‚æ­¥æµ‹è¯•æ¡†æ¶

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- **Rust**: 1.70+ (æ¨èä½¿ç”¨æœ€æ–°ç¨³å®šç‰ˆ)
- **SQLite**: 3.35+
- **æ“ä½œç³»ç»Ÿ**: Linux, macOS, Windows

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd AxumBlogEngine
```

### 2. ç¯å¢ƒé…ç½®

åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®ç¯å¢ƒå˜é‡ï¼š

```env
# æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
DATABASE_URL=sqlite:blogdb.db?mode=rwc

# JWT å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨å¼ºå¯†é’¥ï¼‰
JWT_SECRET=your_super_secret_jwt_key_here

# bcrypt æˆæœ¬å› å­ï¼ˆæ¨è 12-15ï¼‰
BCRYPT_COST=12
```

### 3. åˆå§‹åŒ–æ•°æ®åº“

```bash
# åˆ›å»ºæ•°æ®åº“å¹¶æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬
sqlite3 blogdb.db ".read init.sql"
```

### 4. è¿è¡Œé¡¹ç›®

```bash
# å¼€å‘æ¨¡å¼è¿è¡Œ
cargo run --bin server

# æˆ–è€…æ„å»ºåè¿è¡Œ
cargo build --release
./target/release/server
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:3000` å¯åŠ¨ã€‚

### 5. è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test

# è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
cargo test user_test
cargo test post_test
cargo test comment_test
cargo test favorite_test
```

## ğŸ“š API æ–‡æ¡£

### è®¤è¯

å¤§éƒ¨åˆ† API éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­åŒ…å« JWT ä»¤ç‰Œï¼š

```
Authorization: Bearer <your_jwt_token>
```

### ç”¨æˆ·ç®¡ç†

| æ–¹æ³• | è·¯å¾„ | æè¿° | è®¤è¯ |
|------|------|------|------|
| POST | `/users/register` | ç”¨æˆ·æ³¨å†Œ | âŒ |
| POST | `/users/login` | ç”¨æˆ·ç™»å½• | âŒ |
| POST | `/users/logout` | ç”¨æˆ·ç™»å‡º | âœ… |
| GET | `/users/me` | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ | âœ… |
| PUT | `/users/me` | æ›´æ–°ä¸ªäººä¿¡æ¯ | âœ… |
| GET | `/users/:id` | è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆç®¡ç†å‘˜ï¼‰ | âœ… |
| POST | `/users` | åˆ›å»ºç”¨æˆ·ï¼ˆç®¡ç†å‘˜ï¼‰ | âœ… |
| PUT | `/users/:id` | æ›´æ–°ç”¨æˆ·ï¼ˆç®¡ç†å‘˜ï¼‰ | âœ… |
| DELETE | `/users/:id` | åˆ é™¤ç”¨æˆ·ï¼ˆç®¡ç†å‘˜ï¼‰ | âœ… |

### æ–‡ç« ç®¡ç†

| æ–¹æ³• | è·¯å¾„ | æè¿° | è®¤è¯ |
|------|------|------|------|
| POST | `/posts` | åˆ›å»ºæ–‡ç«  | âœ… |
| GET | `/posts` | è·å–æ–‡ç« åˆ—è¡¨ï¼ˆæ”¯æŒæœç´¢å’Œåˆ†é¡µï¼‰ | âŒ |
| GET | `/posts/:id` | è·å–æ–‡ç« è¯¦æƒ… | âŒ |
| PUT | `/posts/:id` | æ›´æ–°æ–‡ç«  | âœ… |
| DELETE | `/posts/:id` | åˆ é™¤æ–‡ç«  | âœ… |

### è¯„è®ºç®¡ç†

| æ–¹æ³• | è·¯å¾„ | æè¿° | è®¤è¯ |
|------|------|------|------|
| POST | `/comments` | åˆ›å»ºè¯„è®º | âœ… |
| GET | `/comments/:id` | è·å–è¯„è®ºè¯¦æƒ… | âŒ |
| PUT | `/comments/:id` | æ›´æ–°è¯„è®º | âœ… |
| DELETE | `/comments/:id` | åˆ é™¤è¯„è®º | âœ… |
| GET | `/posts/:post_id/comments` | è·å–æ–‡ç« è¯„è®ºåˆ—è¡¨ | âŒ |

### æ”¶è—ç®¡ç†

| æ–¹æ³• | è·¯å¾„ | æè¿° | è®¤è¯ |
|------|------|------|------|
| POST | `/post_fav` | æ”¶è—/å–æ¶ˆæ”¶è—æ–‡ç«  | âœ… |
| GET | `/post_fav/my/list` | è·å–æˆ‘çš„æ”¶è—åˆ—è¡¨ | âœ… |

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
AxumBlogEngine/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ bin/
â”‚   â”‚   â””â”€â”€ server.rs          # åº”ç”¨ç¨‹åºå…¥å£ç‚¹
â”‚   â”œâ”€â”€ database/              # æ•°æ®å±‚
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ user.rs           # ç”¨æˆ·æ•°æ®æ¨¡å‹å’Œä»“åº“
â”‚   â”‚   â”œâ”€â”€ post.rs           # æ–‡ç« æ•°æ®æ¨¡å‹å’Œä»“åº“
â”‚   â”‚   â”œâ”€â”€ comment.rs        # è¯„è®ºæ•°æ®æ¨¡å‹å’Œä»“åº“
â”‚   â”‚   â””â”€â”€ favorite.rs       # æ”¶è—æ•°æ®æ¨¡å‹å’Œä»“åº“
â”‚   â”œâ”€â”€ handler/               # ä¸šåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ auth.rs           # è®¤è¯ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ user.rs           # ç”¨æˆ·å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ post.rs           # æ–‡ç« å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ comment.rs        # è¯„è®ºå¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ favorite.rs       # æ”¶è—å¤„ç†å™¨
â”‚   â”‚   â””â”€â”€ idl.rs            # æ•°æ®ä¼ è¾“å¯¹è±¡å®šä¹‰
â”‚   â”œâ”€â”€ error.rs              # é”™è¯¯å¤„ç†
â”‚   â””â”€â”€ lib.rs                # åº“å…¥å£
â”œâ”€â”€ tests/                     # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ user_test.rs          # ç”¨æˆ·æ¨¡å—æµ‹è¯•
â”‚   â”œâ”€â”€ post_test.rs          # æ–‡ç« æ¨¡å—æµ‹è¯•
â”‚   â”œâ”€â”€ comment_test.rs       # è¯„è®ºæ¨¡å—æµ‹è¯•
â”‚   â”œâ”€â”€ favorite_test.rs      # æ”¶è—æ¨¡å—æµ‹è¯•
â”‚   â””â”€â”€ TESTING_GUIDE.md      # æµ‹è¯•æŒ‡å—
â”œâ”€â”€ init.sql                   # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ Cargo.toml                # é¡¹ç›®é…ç½®å’Œä¾èµ–
â””â”€â”€ README.md                 # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„

- **users**: ç”¨æˆ·ä¿¡æ¯è¡¨
- **posts**: æ–‡ç« ä¿¡æ¯è¡¨
- **comments**: è¯„è®ºä¿¡æ¯è¡¨ï¼ˆæ”¯æŒåµŒå¥—ï¼‰
- **favorites**: ç”¨æˆ·æ”¶è—è¡¨

### å…³ç³»è®¾è®¡

- ç”¨æˆ·ä¸æ–‡ç« ï¼šä¸€å¯¹å¤šå…³ç³»
- ç”¨æˆ·ä¸è¯„è®ºï¼šä¸€å¯¹å¤šå…³ç³»
- æ–‡ç« ä¸è¯„è®ºï¼šä¸€å¯¹å¤šå…³ç³»
- ç”¨æˆ·ä¸æ”¶è—ï¼šå¤šå¯¹å¤šå…³ç³»ï¼ˆé€šè¿‡ favorites è¡¨ï¼‰
- è¯„è®ºæ”¯æŒè‡ªå¼•ç”¨ï¼ˆparent_idï¼‰å®ç°åµŒå¥—å›å¤

## ğŸ§ª æµ‹è¯•

é¡¹ç›®åŒ…å«å®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼Œè¦†ç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ï¼š

- **ç”¨æˆ·æ¨¡å—**: 15ä¸ªæµ‹è¯•ç”¨ä¾‹
- **æ–‡ç« æ¨¡å—**: 16ä¸ªæµ‹è¯•ç”¨ä¾‹
- **è¯„è®ºæ¨¡å—**: 15ä¸ªæµ‹è¯•ç”¨ä¾‹
- **æ”¶è—æ¨¡å—**: 14ä¸ªæµ‹è¯•ç”¨ä¾‹

æ€»è®¡ **60ä¸ªæµ‹è¯•ç”¨ä¾‹**ï¼Œç¡®ä¿ä»£ç è´¨é‡å’ŒåŠŸèƒ½ç¨³å®šæ€§ã€‚

è¯¦ç»†æµ‹è¯•æŒ‡å—è¯·å‚è€ƒï¼š[tests/TESTING_GUIDE.md](tests/TESTING_GUIDE.md)

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `src/database/` ä¸­å®šä¹‰æ•°æ®æ¨¡å‹å’Œä»“åº“
2. åœ¨ `src/handler/idl.rs` ä¸­å®šä¹‰ DTO
3. åœ¨ `src/handler/` ä¸­å®ç°ä¸šåŠ¡é€»è¾‘
4. åœ¨ `src/bin/server.rs` ä¸­æ³¨å†Œè·¯ç”±
5. åœ¨ `tests/` ä¸­æ·»åŠ æµ‹è¯•ç”¨ä¾‹

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ `cargo fmt` æ ¼å¼åŒ–ä»£ç 
- ä½¿ç”¨ `cargo clippy` æ£€æŸ¥ä»£ç è´¨é‡
- éµå¾ª Rust å®˜æ–¹å‘½åè§„èŒƒ
- ä¸ºå…¬å…± API ç¼–å†™æ–‡æ¡£æ³¨é‡Š

## ğŸš€ éƒ¨ç½²

### Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

```dockerfile
# Dockerfile ç¤ºä¾‹
FROM rust:1.70 as builder
WORKDIR /app
COPY . .
RUN cargo build --release

FROM debian:bookworm-slim
RUN apt-get update && apt-get install -y sqlite3 && rm -rf /var/lib/apt/lists/*
WORKDIR /app
COPY --from=builder /app/target/release/server .
COPY init.sql .
EXPOSE 3000
CMD ["./server"]
```

### ä¼ ç»Ÿéƒ¨ç½²

1. ç¼–è¯‘é¡¹ç›®ï¼š`cargo build --release`
2. å¤åˆ¶äºŒè¿›åˆ¶æ–‡ä»¶åˆ°æœåŠ¡å™¨
3. é…ç½®ç¯å¢ƒå˜é‡
4. åˆå§‹åŒ–æ•°æ®åº“
5. å¯åŠ¨æœåŠ¡

## ğŸ”® æœªæ¥è®¡åˆ’

- [ ] Redis ç¼“å­˜æ”¯æŒ
- [ ] å…¨å±€ 404 å¤„ç†å™¨
- [ ] æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
- [ ] é‚®ä»¶é€šçŸ¥ç³»ç»Ÿ
- [ ] æ–‡ç« æ ‡ç­¾ç³»ç»Ÿ
- [ ] æœç´¢åŠŸèƒ½å¢å¼º
- [ ] API é™æµ
- [ ] ç®¡ç†åå°ç•Œé¢

## ğŸ“– å‚è€ƒæ–‡æ¡£

- [Rust å®˜æ–¹æ–‡æ¡£](https://doc.rust-lang.org/)
- [Axum æ¡†æ¶æ–‡æ¡£](https://docs.rs/axum/latest/axum/)
- [SeaORM æ–‡æ¡£](https://www.sea-ql.org/SeaORM/docs/introduction/tutorial/)
- [SQLite æ–‡æ¡£](https://www.sqlite.org/docs.html)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -m 'Add some amazing feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/amazing-feature`
5. æäº¤ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ‘¨â€ğŸ’» ä½œè€…

Axum Blog Engine å¼€å‘å›¢é˜Ÿ

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼
